---
import BaseLayout from "../layouts/BaseLayout.astro";
import HorizontalCard from "../components/HorizontalCard.astro";
import { getCollection } from "astro:content";
import createSlug from "../lib/createSlug"

const posts = (await getCollection("blog")).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const last_posts = posts.slice(0, 3);
---

<BaseLayout sideBarActiveItemID="home">
  <div class="pb-12 mt-5">
    <div class="text-5xl font-bold">Hello ðŸ‘‹ I'm Bryan McMahon</div>
    <div class="text-3xl py-3 font-bold">Paramedic and Computer Science student at UMass-Boston</div>
    <div class="py-2">
      <text class="text-lg">
        This is my personal website where I host my portfolio, showcase my latest projects, and share blog posts about my hobbies and interests.
        Check out my resume to get to know more about me or read some of my educational blog posts about my hobbies.
      </text>
    </div>
    <div class="mt-8">
      <a class="btn" href="https://www.linkedin.com/in/bryan-mcmahon1/" target="_blank"> Let's connect!</a>
      </a>
    </div>
  </div>

  <div>
    <div class="text-3xl w-full font-bold mb-2">My lastest projects </div>
  </div>

  <HorizontalCard
    title="Stock Simulator"
    img="/stocksim.png"
    desc="Takes historical S&P500 data by the minute and graphs it in millisecond intervals set by the user. Allows for trading and tracks both realized and unrealized gains as well as overall profit."
    url="https://github.com/b-m-git-hub/bryanm-stocksim"
  />
  <div class="divider my-0"></div>

  <!-- Future projects to be added
  <HorizontalCard
    title="Demo Project 2"
    img="/post_img.webp"
    desc="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
    url="#"
  />
  <div class="divider my-0"></div>
  <HorizontalCard
    title="Demo Project 3"
    img="/post_img.webp"
    desc="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
    url="#"
    badge="FOSS"
  />
  -->

  <div>
    <div class="text-3xl w-full font-bold mb-5 mt-10">Latest from blog</div>
  </div>

  {
    last_posts.map((post) => (
      <>
        <HorizontalCard
          title={post.data.title}
          img="/canalsunriseclose.jpg"
          desc={post.data.description}
          url={"/blog/" + createSlug(post.data.title, post.slug)}
          target="_self"
          badge={post.data.badge}
        />
        <div class="divider my-0" />
      </>
    ))
  }
</BaseLayout>
